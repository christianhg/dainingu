<div class="panel" ng-class="{'panel-info': !vm.session.active, 'panel-success': vm.session.active, 'panel-warning': vm.session.expired}">
    <div class="panel-heading">
        <h3 class="panel-title">
            <h3 class="panel-title clearfix">
                <strong>{{vm.session.customer.name}}</strong> (bord {{vm.session.table}})
                <session-labels></session-labels>
                <strong class="pull-right">{{vm.session.key}}</strong>
            </h3>
        </h3>
    </div>
    <div class="panel-body">
        <session-alerts></session-alerts>

        <div class="well clearfix">
            <div class="pull-left">
                <a ui-sref=".id.edit({id: session._id})" class="btn btn-warning">Redigér session</a>
                <a ui-sref=".id.delete({id: session._id})" class="btn btn-danger">Slet session</a>
            </div>
            <div class="pull-right">
                <button ng-show="session.active && !session.expired" type="submit" ng-click="vm.deactivateSession(session._id)" class="btn btn-info">Deaktivér session</button>
                <button ng-hide="session.expired" type="submit" ng-click="vm.expireSession(session._id)" class="btn btn-warning">Ophør session</button>
                <button ng-show="session.expired" type="submit" ng-click="vm.resumeSession(session._id)" class="btn btn-info">Genoptag session</button>
            </div>
        </div>
        <session-info></session-info>

        <div ng-repeat="order in session.orders" class="panel" ng-class="{
                        'panel-default': !order.committed,
                        'panel-info': order.committed && !order.confirmed,
                        'panel-primary': order.confirmed && !order.completed,
                        'panel-success': order.completed && !order.closed,
                        'panel-warning': order.closed
                        }">
            <div class="panel-heading">
                <h3 class="panel-title">
                    Ordre fra {{order.createdOn | date: 'HH:mm:ss'}}
                    <span class="label label-info" ng-show="order.committed && !order.confirmed">Indsendt</span>
                    <span class="label label-primary" ng-show="order.confirmed && !order.completed">Konfirmeret</span>
                    <span class="label label-success" ng-show="order.completed && !order.closed">Færdiggjort</span>
                    <span class="label label-warning" ng-show="order.closed">Lukket</span>
                </h3>
            </div>
            <div class="panel-body">
                <div class="well clearfix">
                    <div class="pull-left">
                        <button type="submit" class="btn btn-danger" ng-click="vm.deleteOrder(session._id, order._id)">Slet ordre</button>
                    </div>
                    <div class="pull-right" ng-hide="order.committed">
                        <!--<button type="submit" class="btn btn-info" ng-click="vm.commitOrder(vm.session._id, vm.order._id)">Commit</button>-->
                    </div>
                    <div class="pull-right" ng-show="order.committed && !order.confirmed">
                        <button type="submit" class="btn btn-primary" ng-click="vm.confirmOrder(session._id, order._id)">Konfirmer ordre</button>
                        <button type="submit" class="btn btn-default" ng-click="vm.pullOrder(session._id, order._id)">Send ordre tilbage</button>
                    </div>
                    <div class="pull-right" ng-show="order.confirmed && !order.completed">
                        <button type="submit" class="btn btn-success" ng-click="vm.completeOrder(session._id, order._id)">Færdiggør ordre</button>
                        <button type="submit" class="btn btn-info" ng-click="vm.rejectOrder(session._id, order._id)">Afvis ordre</button>
                    </div>
                    <div class="pull-right" ng-show="order.completed && !order.closed">
                        <button type="submit" class="btn btn-warning" ng-click="vm.closeOrder(session._id, order._id)">Luk ordre</button>
                        <button type="submit" class="btn btn-primary" ng-click="vm.incompleteOrder(session._id, order._id)">Marker som ufærdig</button>
                    </div>
                    <div class="pull-right" ng-show="order.closed">
                        <button type="submit" class="btn btn-success" ng-click="vm.openOrder(session._id, order._id)">Åben ordre</button>
                    </div>
                </div>
                <div class="list-group" ng-show="order.dishes.length">
                    <div class="list-group-item clearfix" ng-repeat="dish in order.dishes">
                        {{dish.name}}
                        <div class="pull-right">
                            <button type="submit" class="btn btn-sm btn-danger" ng-click="vm.removeDishFromOrder(session._id, order._id, dish._id)">Fjern fra ordre</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>